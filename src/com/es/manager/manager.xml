<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="Manager">
	<select id="EmpMainList" parameterType="int" resultType="com.es.manager.EmpListDto">
		select e.emp_no emp_no, e.name name, d.dept_name dept_name, p.position_name position_name
		from employees e, department d, position p
		where e.dept_no = d.dept_no and e.position_no = p.position_no
		order by e.emp_no asc
		limit #{start}, 10
	</select>
	<select id="InstMainList" parameterType="int" resultType="com.es.manager.InstListDto">
		select emp_no, instructor_no, name
		from Instructor
		order by instructor_no asc
		limit #{start}, 10
	</select>
	<select id="EduList" parameterType="hashmap" resultType="com.es.manager.EduListDto">
		select b.name belong_name, l.edu_no, l.edu_name, c.edu_name edu_code_name, l.edu_schedule, l.manager, i.name instructor_name
		from education_list l, belong b, education_code c, instructor i
		where l.belong_no = b.belong_no and c.edu_code=l.edu_code and i.instructor_no=l.instructor_no
		limit #{startRow}, #{endRow}
	</select>
	<select id="EduListCount" parameterType="int" resultType="int">
		select count(*)
		from education_list
	</select>
	<select id="EduListDetail" parameterType="int" resultType="com.es.manager.EduListDto">
		select *, i.name as instructor_name
		from education_list l, instructor i, education_detail detail
		where l.edu_no=#{edu_no} and i.instructor_no = l.instructor_no and detail.edu_no = l.edu_no;
	</select>
</mapper>