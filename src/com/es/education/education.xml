<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="Education">
	<!-- 수강목록 리스트  -->
	<select id="EduHistory" resultType="com.es.education.EduHistoryDto">
		select l.edu_no, l.edu_name, l.instructor_no,  l.edu_schedule,
				h.edu_state, h.emp_eval, instructor.name as instructor_name, detail.end_date
		from education_history h, education_list l, instructor, education_detail detail
		where h.edu_no = l.edu_no and instructor.instructor_no = l.instructor_no 
				and detail.edu_no = l.edu_no and h.emp_no=#{account}
		order by l.edu_schedule desc;
	</select>
	
	<!-- 수강목록 상세 커리큘럼 보기 -->
	<select id="EduHistoryDetail" resultType="com.es.education.EduHistoryDto" >
		select *, i.name as instructor_name
		from education_list l, instructor i, education_detail detail
		where l.edu_no=#{no} and i.instructor_no = l.instructor_no and detail.edu_no = l.edu_no;
	</select>
	
	<!-- 직원의 강의평가 null인 것을 새로 입력한 거로 수정 -->
	<update id="insertEmpEval" parameterType="hashmap">
		update education_history set emp_eval=#{emp_eval} where edu_no=#{no}
	</update>
</mapper>