<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="Education">
	<select id="EduList" resultType="com.es.education.EduListDto">
		select l.edu_no, l.edu_name, l.instructor_no,  l.edu_schedule,
				h.edu_state, h.emp_eval, instructor.name as instructor_name
		from education_history h, education_list l, instructor
		where h.edu_no = l.edu_no and instructor.instructor_no = l.instructor_no;
	</select>
	
	<select id="EduDetail" resultType="com.es.education.EduListDto" >
		select *, i.name as instructor_name
		from education_list l, instructor i
		where edu_no=#{no} and i.instructor_no = l.instructor_no;
	</select>
	
	<select id="EducationList" resultType="com.es.education.EducationListDto">
		select l.edu_no edu_no, l.belong_no belong_no, l.edu_field edu_field, l.edu_code edu_code, l.edu_name edu_name,
		l.edu_target edu_target, l.manager manager, l.edu_way edu_way, l.edu_schedule edu_schedule, l.edu_date edu_date, l.edu_location edu_location, l.instructor_no instructor_no,
		l.budget budget, l.note note, l.applicants_limit applicants_limit, l.closing_date closing_date, l.approval_state approval_state, 
		i.name instructor_name, b.name belong_name, e.edu_name edu_code_name
		from education_list l, instructor i,  belong b, education_code e
		where l.instructor_no = i.instructor_no and l.belong_no = b.belong_no and l.edu_code = e.edu_code
	</select>
	
	<select id="EducationListDetail" resultType="com.es.education.EducationListDto">
		select l.edu_no edu_no, l.belong_no belong_no, l.edu_field edu_field, l.edu_code edu_code, l.edu_name edu_name,
		l.edu_target edu_target, l.manager manager, l.edu_way edu_way, l.edu_schedule edu_schedule, l.edu_date edu_date, l.edu_location edu_location, l.instructor_no instructor_no,
		l.budget budget, l.note note, l.applicants_limit applicants_limit, l.closing_date closing_date, l.approval_state approval_state, 
		i.name instructor_name, b.name belong_name, e.edu_name edu_code_name
		from education_list l, instructor i,  belong b, education_code e
		where l.instructor_no = i.instructor_no and l.belong_no = b.belong_no and l.edu_code = e.edu_code and l.edu_no=#{edu_no}
	</select>
	
	<select id="EducationApplicants" resultType="int">
		select count(distinct emp_no) from education_history where edu_no=#{edu_no}
	</select>
	
	<insert id="EducationApplication" parameterType="hashmap">
		insert into education_history(emp_no, instructor_no, edu_no) values(#{emp_no},#{instructor_no},#{edu_no})
	</insert>
	
	
</mapper>